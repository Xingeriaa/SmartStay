@{
    ViewData["Title"] = "T·∫°o phi·∫øu s·ª± c·ªë";
}

<style>
    .create-page { max-width: 720px; margin: 0 auto; }
    .form-card   { background:#fff; border:1px solid #e9ecef; border-radius:16px; padding:2rem; box-shadow:0 2px 12px rgba(0,0,0,.05); }
    .field-label { font-size:.82rem; font-weight:700; color:#555; margin-bottom:.35rem; }
    .priority-btn { border:2px solid transparent; border-radius:10px; padding:.5rem 1.1rem; font-weight:700; cursor:pointer; transition:all .15s; background:#f8f9fa; color:#555; }
    .priority-btn.selected-High   { border-color:#d63031; background:#fde8e8; color:#d63031; }
    .priority-btn.selected-Medium { border-color:#e67e22; background:#fff3cd; color:#e67e22; }
    .priority-btn.selected-Low    { border-color:#00b894; background:#d4edda; color:#00b894; }
    .priority-btn:hover           { transform:translateY(-1px); }
</style>

<div class="create-page">
    <nav aria-label="breadcrumb" class="mb-3">
        <ol class="breadcrumb small">
            <li class="breadcrumb-item"><a asp-action="Index" class="text-muted text-decoration-none"><i class="fas fa-ticket-alt me-1"></i>S·ª± c·ªë & H·ªó tr·ª£</a></li>
            <li class="breadcrumb-item active">T·∫°o phi·∫øu m·ªõi</li>
        </ol>
    </nav>

    @if (TempData["Error"] != null)
    {
        <div class="alert alert-danger border-0 mb-3"><i class="fas fa-exclamation-triangle me-2"></i>@TempData["Error"]</div>
    }

    <div class="form-card">
        <div class="d-flex align-items-center gap-2 mb-4">
            <span style="width:40px;height:40px;background:linear-gradient(135deg,#d63031,#e17055);border-radius:12px;display:flex;align-items:center;justify-content:center;">
                <i class="fas fa-ticket-alt text-white"></i>
            </span>
            <div>
                <h5 class="mb-0 fw-bold">G·ª≠i phi·∫øu s·ª± c·ªë</h5>
                <small class="text-muted">M√¥ t·∫£ r√µ v·∫•n ƒë·ªÅ ƒë·ªÉ nh√¢n vi√™n x·ª≠ l√Ω nhanh nh·∫•t</small>
            </div>
        </div>

        <form asp-action="Create" method="post" id="createForm">
            @Html.AntiForgeryToken()

            <div class="mb-3">
                <div class="field-label">Ph√≤ng <span class="text-danger">*</span></div>
                <select name="RoomId" class="form-select" required>
                    <option value="">-- Ch·ªçn ph√≤ng --</option>
                    @if (ViewBag.Rooms != null)
                    {
                        foreach (var r in (IEnumerable<Microsoft.AspNetCore.Mvc.Rendering.SelectListItem>)ViewBag.Rooms)
                        {
                            <option value="@r.Value">@r.Text</option>
                        }
                    }
                </select>
            </div>

            <div class="mb-3">
                <div class="field-label">Ti√™u ƒë·ªÅ s·ª± c·ªë <span class="text-danger">*</span></div>
                <input name="Title" type="text" class="form-control" placeholder="VD: ƒêi·ªÅu h√≤a kh√¥ng ho·∫°t ƒë·ªông, n∆∞·ªõc b·ªã t·∫Øc..." required minlength="5" maxlength="200" />
            </div>

            <div class="mb-3">
                <div class="field-label">M√¥ t·∫£ chi ti·∫øt</div>
                <textarea name="Description" class="form-control" rows="4"
                          placeholder="M√¥ t·∫£ c·ª• th·ªÉ v·∫•n ƒë·ªÅ: th·ªùi ƒëi·ªÉm x·∫£y ra, tri·ªáu ch·ª©ng, m·ª©c ƒë·ªô ·∫£nh h∆∞·ªüng..."></textarea>
            </div>

            <div class="mb-4">
                <div class="field-label">M·ª©c ƒë·ªô ∆∞u ti√™n <span class="text-danger">*</span></div>
                <input type="hidden" name="Priority" id="priorityInput" value="Medium" />
                <div class="d-flex gap-2 flex-wrap">
                    <button type="button" class="priority-btn selected-Medium" data-priority="Medium" onclick="setPriority('Medium')">
                        üü° Trung b√¨nh
                    </button>
                    <button type="button" class="priority-btn" data-priority="High" onclick="setPriority('High')">
                        üî¥ Kh·∫©n c·∫•p
                    </button>
                    <button type="button" class="priority-btn" data-priority="Low" onclick="setPriority('Low')">
                        üü¢ Kh√¥ng g·∫•p
                    </button>
                </div>
                <small class="text-muted d-block mt-1">Ch·ªçn m·ª©c ƒë·ªô ph√π h·ª£p ƒë·ªÉ nh√¢n vi√™n s·∫Øp x·∫øp x·ª≠ l√Ω</small>
            </div>

            <div class="d-flex justify-content-end gap-2 pt-3 border-top">
                <a asp-action="Index" class="btn btn-light border px-4">H·ªßy</a>
                <button type="submit" class="btn px-5 fw-bold text-white"
                        style="background:linear-gradient(135deg,#d63031,#e17055);border-radius:10px;">
                    <i class="fas fa-paper-plane me-1"></i>G·ª≠i phi·∫øu
                </button>
            </div>
        </form>
    </div>
</div>

@section Scripts {
<script>
    function setPriority(p) {
        document.getElementById('priorityInput').value = p;
        document.querySelectorAll('.priority-btn').forEach(btn => {
            btn.className = 'priority-btn';
            if (btn.dataset.priority === p) btn.classList.add('selected-' + p);
        });
    }
    // Init
    setPriority('Medium');
</script>
}
